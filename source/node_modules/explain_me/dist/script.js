const ccc = require("clear_concise_creative")
const automate_me = require("automate_me")

function addHomePageRepo(moduleName) {
    let readFile = ccc.readJSON("./package.json")
    if (!readFile["homepage"]) {
        ccc.appendToJSON("./package.json", "homepage", `https://zen-out.github.io/package.html`)
    }
    if (!readFile["repository"]) {
        ccc.mergeJSONObject("./package.json", ["repository"], {
            "type": "git",
            "url": `https://github.com/zen-out/${moduleName}.git`
        })
    }
    if (!readFile["author"]) {
        ccc.appendToJSON("./package.json", "author", `Lesley Cheung (www.github.com/zen-out)`)
    }
}

/**
 * Adds info 
 * @author zen-out
 * @date 2022-03-22
 * @param {any} moduleName = undefined
 * @returns {any}
 */
function addScript(moduleName = undefined) {
    let getBabel = ccc.readJSON("./node_modules/explain_me/.babelrc")
    ccc.writeJSON("./.babelrc", getBabel)
    let getWebpack = ccc.readFile("./node_modules/explain_me/webpack.config.js")
    ccc.writeFile("./webpack.config.js", getWebpack)
    addHomePageRepo(moduleName)
    ccc.mergeJSONObject("./package.json", ["scripts"], {
        "compile": "rimraf dist && babel src -d dist",
        "build": "rimraf dist/ && webpack",
        "play": "node playground.js",
        "push": "git add . && git commit -m 'updated' && git push",
        "deploy": "npm version patch && npm publish",
        "update": "ncu --upgrade"
    })

    console.log("npm install whats_wrong")
    console.log("npm install --save-dev bulletproof_me code_clarity make_legit when_you_free test_waters automate_me array_helperz clear_concise_creative html_basetest jquery_selectors_mergez make_fakes node_basetest gulp gulp-mocha rimraf webpack webpack-cli copy-webpack-plugin @babel/polyfill @babel/preset-env @babel/cli @babel/plugin-proposal-class-properties @babel/core @babel/node babel-loader")


}
module.exports = { addScript }