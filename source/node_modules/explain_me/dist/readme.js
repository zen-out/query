const fs = require("fs")
const jsdoc2md = require('jsdoc-to-markdown')
const ccc = require("clear_concise_creative")

function addInstructions(moduleName) {
    let readme = ccc.readFile("./README.md")
    let instructions = "## If install on html...: \n```" + `<script src="./node_modules/${moduleName}/index.js"></script>` + " ``` \n ``` " + `\nconst output` + " =  " + `${moduleName}.method(parameter)` + "```\n"
    let final = instructions + readme
    ccc.writeFile("./README.md", final)
    return final
}

/**
 * @example
 * readme(moduleName, docsLink, "intro.md")
 * @author zen-out
 * @date 2022-03-08
 * @param {any} moduleName = undefined
 * @param {any}  video = undefined
 */
function readme(moduleName = undefined, folder = undefined, intro = undefined) {

    let badges = `# ${moduleName}\n`

    let getData = jsdoc2md.renderSync({ files: `${folder}/**.js` })

    if (moduleName) {
        badges += "\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)" + `\n![NPM Downloads](https://img.shields.io/npm/dw/${moduleName})\n`

        badges += `[Play with docs](https://zen-out.github.io/modules/${moduleName}.html)`
        badges += "\n## Instructions: \n\n```js\n" + `npm install ${moduleName}` + "\n" + `const ${moduleName}` + " =  " + `require('${moduleName}')` + "\n```\n"
        badges += "\n## If utilizing in html...: \n```html\n" + `<script src="./node_modules/${moduleName}/index.js"></script>` + "\n" + `<script> \n$(()=> { \n     const output` + " =  " + `${moduleName}.method(parameter)\n })\n</script>` + "\n```\n"

        if (intro) {
            badges += ccc.readFile(`./${intro}`)
        }

    }
    let data = badges + "\n\n" + getData;
    ccc.writeFile("./README.md", data)
}


module.exports = { addInstructions, readme }